{
  "id": "walls_and_buildings",
  "description": {
    "en": "Special builtin layer providing all walls and buildings. This layer is useful in presets for objects which can be placed against walls (e.g. AEDs, postboxes, entrances, addresses, surveillance cameras, …). This layer is invisible by default and not toggleable by the user.",
    "nl": "Speciale ingebouwde laag voor alle muren en gebouwen. Deze laag is nuttig in voorkeuzen voor objecten die tegen muren geplaatst kunnen worden (bv. AEDs, brievenbussen, ingangen, adressen, beveiligingscamera's,…). Deze laag is standaard onzichtbaar en niet in te schakelen door de gebruiker.",
    "de": "Spezielle Ebene, die alle Wände und Gebäude bereitstellt. Diese Ebene ist nützlich in Voreinstellungen für Objekte, die an Wänden platziert werden können (z. B. AEDs, Briefkästen, Eingänge, Adressen, Überwachungskameras, ...). Diese Ebene ist standardmäßig unsichtbar und kann vom Benutzer nicht umgeschaltet werden.",
    "fr": "Couche intégrée spéciale fournissant tous les murs et bâtiments. Cette couche est utile dans les préréglages pour les objets qui peuvent être placés contre les murs (par exemple, les DEA, les boîtes aux lettres, les entrées, les adresses, les caméras de surveillance, …). Ce calque est invisible par défaut et non inchangeable par l'utilisateur.",
    "da": "Specielt indbygget lag giver alle vægge og bygninger. Dette lag er nyttigt i forudindstillinger til objekter, der kan placeres mod vægge (f.eks. AED'er, postkasser, indgange, adresser, overvågningskameraer, …). Dette lag er usynligt som standard og kan ikke skiftes af brugeren.",
    "ca": "Capa construïda especial que proporciona totes les parets i edificis. Aquesta capa és útil als predefinits per a objectes que es poden col·locar a les parets (p. ex. DEA, bústies de correus, entrades, adreces, càmeres de vigilància, ...). Aquesta capa és invisible per defecte i no es pot activar per l'usuari.",
    "es": "Capa especial incorporada que proporciona todas las paredes y edificios. Esta capa es útil en los preajustes para objetos que pueden colocarse contra las paredes (por ejemplo: AEDs, buzones de correos, entradas, direcciones, cámaras de vigilancia, ...). Esta capa es invisible por defecto y no puede ser activada por el usuario.",
    "cs": "Speciální zabudovaná vrstva poskytující všechny stěny a budovy. Tato vrstva je užitečná v předvolbách pro objekty, které lze umístit ke stěnám (např. AED, poštovní schránky, vchody, adresy, bezpečnostní kamery, …). Tato vrstva je ve výchozím nastavení neviditelná a uživatel ji nemůže přepínat.",
    "zh_Hant": "特殊的內建圖層顯示所有牆壁與建築。這個圖層對於規畫要靠牆的東西 (例如 AED、郵筒、入口、地址、監視器等) 相當實用。這個圖層預設顯示而且無法由使用者開關。",
    "pl": "Specjalna warstwa zabudowana zapewniająca wszystkie mury i budynki. Warstwa ta jest przydatna w ustawieniach wstępnych obiektów, które można umieścić przy ścianach (np. AED, skrzynki pocztowe, wejścia, adresy, kamery monitorujące itp.). Warstwa ta jest domyślnie niewidoczna i użytkownik nie może jej przełączać."
  },
  "source": {
    "osmTags": {
      "and": [
        {
          "or": [
            "barrier=wall",
            "building~*"
          ]
        }
      ]
    }
  },
  "calculatedTags": [
    "_entrance_properties=overlapWith(feat)('entrance')?.map(e => e.feat.properties)?.filter(p => p !== undefined && p.indoor !== 'door')",
    "_entrance_properties_with_width=get(feat)('_entrance_properties')?.filter(p => p['width'] !== undefined)",
    "_entrances_count=get(feat)('_entrance_properties').length",
    "_entrances_count_without_width_count= get(feat)('_entrances_count') - get(feat)('_entrance_properties_with_width').length",
    "_biggest_width= Math.max( get(feat)('_entrance_properties').map(p => p.width))",
    "_biggest_width_properties= /* Can be a list! */ get(feat)('_entrance_properties').filter(p => p.width === get(feat)('_biggest_width'))",
    "_biggest_width_id=get(feat)('_biggest_width_properties').id"
  ],
  "isCounted": false,
  "minzoom": 18,
  "shownByDefault": false,
  "title": {
    "render": {
      "en": "Wall or building",
      "nl": "Muur of gebouw",
      "de": "Wand oder Gebäude",
      "es": "Pared o edificio",
      "fr": "Mur ou bâtiment",
      "da": "Mur eller bygning",
      "ca": "Paret o edifici",
      "cs": "Zeď nebo budova"
    }
  },
  "pointRendering": null,
  "lineRendering": [
    {
      "color": "#fff",
      "fill": "no",
      "width": "3"
    },
    {
      "color": "#333",
      "fill": "no",
      "width": "2"
    }
  ],
  "passAllFeatures": true,
  "tagRenderings": [
    {
      "id": "just_created",
      "labels": [
        "added_by_default"
      ],
      "description": "This element shows a 'thank you' that the contributor has recently created this element",
      "classes": "rounded-xl thanks",
      "mappings": [
        {
          "if": "id~*",
          "icon": "./assets/svg/party.svg",
          "then": {
            "ca": "Acabeu de crear aquest element! Gràcies per compartir aquesta informació amb el mon i ajudar a persones al voltant del món.",
            "de": "Sie haben gerade dieses Element erstellt! Vielen Dank, dass Sie diese Informationen mit der Welt teilen und Menschen weltweit helfen.",
            "en": "You just created this element! Thanks for sharing this info with the world and helping people worldwide.",
            "fr": "Vous venez de créer cet élément ! Merci d'avoir partagé cette information avec le monde et d'aider les autres personnes.",
            "nl": "Je hebt dit punt net toegevoegd! Bedankt om deze info met iedereen te delen en om de mensen wereldwijd te helpen.",
            "cs": "Tento prvek jste právě vytvořili! Díky za sdílení těchto informací se světem a pomoc lidem po celém světě."
          }
        }
      ],
      "condition": {
        "and": [
          "_backend~*",
          "_last_edit:passed_time<300",
          {
            "or": [
              "_version_number=",
              "_version_number=1"
            ]
          }
        ]
      },
      "metacondition": {
        "and": [
          {
            "#": "if _last_edit:contributor:uid is unset, then the point hasn't been uploaded yet",
            "or": [
              "_last_edit:contributor:uid:={_uid}",
              "_last_edit:contributor:uid="
            ]
          }
        ]
      }
    },
    {
      "id": "entrance_info",
      "render": {
        "ca": "<h3>Entrades</h3>Aquest edifici té {_entrances_count} entrades:{multi(_entrance_properties_with_width,Una <a href='#&LBRACEid&RBRACE'>entrada </a> de &LBRACEcanonical&LPARENSwidth&RPARENS&RBRACE,)}{_entrances_count_without_width_count} entrades encara no tenen informació d'amplada",
        "cs": "<h3>Vchody</h3>Tato budova má {_entrances_count} vchodů:{multi(_entrance_properties_with_width,<a href='#&LBRACEid&RBRACE'>vchod</a> &LBRACEcanonical&LPARENSwidth&RPARENS&RBRACE,)}{_entrances_count_without_width_count} vchody zatím nemají informace o šířce",
        "da": "<h3>Indgange</h3>Denne bygning har {_entrances_count} indgange:{multi(_entrance_properties_with_width,En <a href='#&LBRACEid&RBRACE'>indgang</a> på &LBRACEcanonical&LPARENSwidth&RPARENS&RBRACE,)}{_entrances_count_without_width_count} indgange har endnu ikke oplysninger om bredde",
        "de": "<h3>Eingänge</h3>Das Gebäude hat {_entrances_count} Eingänge:{multi(_entrance_properties_with_width,Ein <a href='#&LBRACEid&RBRACE'>Eingang</a> von &LBRACEcanonical&LPARENSwidth&RPARENS&RBRACE,)}{_entrances_count_without_width_count} Eingänge haben keine Angaben zur Breite",
        "en": "<h3>Entrances</h3>This building has {_entrances_count} entrances:{multi(_entrance_properties_with_width,An <a href='#&LBRACEid&RBRACE'>entrance</a> of &LBRACEcanonical&LPARENSwidth&RPARENS&RBRACE,)}{_entrances_count_without_width_count} entrances don't have width information yet",
        "nl": "<h3>Ingangen</h3>Dit gebouw heeft {_entrances_count} ingangen:{multi(_entrance_properties_with_width,Een <a href='#&LBRACEid&RBRACE'>ingang</a> van &LBRACEcanonical&LPARENSwidth&RPARENS&RBRACE,)}{_entrances_count_without_width_count} ingangen hebben nog geen informatie over de breedte"
      },
      "mappings": [
        {
          "if": "_entrances_count=0",
          "then": {
            "en": "No entrance has been marked",
            "de": "Es wurde kein Eingang markiert",
            "da": "Der er ikke markeret nogen indgang",
            "nl": "Geen ingang is gemarkeerd",
            "ca": "No s'ha senyalitzat cap entrada",
            "cs": "Nebyl označen žádný vchod"
          }
        },
        {
          "if": "_entrances_count_without_width:=_entrances_count",
          "then": {
            "en": "None of the {_entrance_count} entrances have width information yet",
            "de": "Keiner der {_entrance_count} Eingänge hat bisher Angaben zur Breite",
            "da": "Ingen af {_entrance_count}-indgangene har oplysninger om bredde endnu",
            "nl": "Geen van de {_entrance_count} ingangen hebben al informatie over de breedte",
            "ca": "Cap de les {_entrance_count} entrades té informació d'amplada encara",
            "cs": "Žádný z {_entrance_count} vchodů zatím nemá informace o šířce"
          }
        }
      ]
    },
    {
      "id": "biggest_width",
      "render": "The <a href='#{_biggest_width_id}'>entrance with the biggest width</a> is {canonical(_biggest_width)} wide",
      "condition": "_biggest_width_id~*"
    },
    {
      "id": "leftover-questions",
      "render": {
        "*": "{questions( ,)}"
      }
    },
    {
      "id": "lod",
      "labels": [
        "added_by_default"
      ],
      "render": {
        "*": "{linked_data_from_website()}"
      }
    },
    {
      "id": "minimap",
      "description": "Shows a small map with the feature. Added by default to every popup",
      "render": {
        "*": "{minimap(18, id): width:100%; height:8rem; border-radius:2rem; overflow: hidden; pointer-events: none;}"
      }
    },
    {
      "id": "last_edit",
      "labels": [
        "added_by_default"
      ],
      "description": "Gives some metainfo about the last edit and who did edit it - rendering only",
      "condition": {
        "and": [
          "_last_edit:contributor~*",
          "_last_edit:changeset~*"
        ]
      },
      "metacondition": {
        "or": [
          "__featureSwitchIsTesting=true",
          "__featureSwitchIsDebugging=true",
          "mapcomplete-show_debug=yes",
          "_csCount>=10"
        ]
      },
      "render": {
        "ca": "{link(Darrera edició el &LBRACE_last_edit:timestamp&RBRACE per &LBRACE_last_edit:contributor&RBRACE,&LBRACE_backend&RBRACE/changeset/&LBRACE_last_edit:changeset&RBRACE,subtle font-small,,)}",
        "cs": "{link(Naposledy upravil &LBRACE_last_edit:timestamp&RBRACE &LBRACE_last_edit:contributor&RBRACE,&LBRACE_backend&RBRACE/changeset/&LBRACE_last_edit:changeset&RBRACE,subtle font-small,,)}",
        "de": "{link(Zuletzt bearbeitet am &LBRACE_last_edit:timestamp&RBRACE von &LBRACE_last_edit:contributor&RBRACE,&LBRACE_backend&RBRACE/changeset/&LBRACE_last_edit:changeset&RBRACE,subtle font-small,,)}",
        "en": "{link(Last edited on &LBRACE_last_edit:timestamp&RBRACE by &LBRACE_last_edit:contributor&RBRACE,&LBRACE_backend&RBRACE/changeset/&LBRACE_last_edit:changeset&RBRACE,subtle font-small,,)}",
        "nl": "{link(Laatst gewijzigd op &LBRACE_last_edit:timestamp&RBRACE door &LBRACE_last_edit:contributor&RBRACE ,&LBRACE_backend&RBRACE/changeset/&LBRACE_last_edit:changeset&RBRACE,subtle font-small,,)}"
      }
    },
    {
      "id": "favourite_status",
      "render": {
        "*": "{favourite_status()}"
      }
    },
    {
      "id": "qr_code",
      "labels": [
        "added_by_default"
      ],
      "classes": "flex items-center gap-x-2",
      "render": {
        "de": "{qr_code()}Scannen Sie den Code, um diesen Ort auf einem anderen Gerät zu öffnen",
        "en": "{qr_code()}Scan this code to open this location on another device",
        "nl": "{qr_code()}Scan deze code om deze locatie op een ander apparaat te zien",
        "sl": "{qr_code()}Skenirajte to kodo, da odprete ta kraj na drugi napravi"
      }
    },
    {
      "id": "share",
      "labels": [
        "added_by_default"
      ],
      "metacondition": "_supports_sharing=yes",
      "render": {
        "de": "{share_link(,Standort teilen)}",
        "en": "{share_link(,Share this location)}",
        "nl": "{share_link(,Deel deze locatie)}"
      }
    },
    {
      "id": "all-tags",
      "render": {
        "*": "{all_tags()}"
      },
      "metacondition": {
        "or": [
          "__featureSwitchIsDebugging=true",
          "mapcomplete-show_tags=full",
          "mapcomplete-show_debug=yes"
        ]
      }
    }
  ],
  "units": [
    {
      "width": {
        "quantity": "distance",
        "denominations": [
          "m",
          "cm"
        ]
      },
      "_biggest_width": {
        "quantity": "distance",
        "denominations": [
          "m",
          "cm"
        ]
      }
    }
  ],
  "titleIcons": [
    {
      "id": "wikipedialink",
      "labels": [
        "defaults",
        "in_favourite"
      ],
      "render": "<a href='https://wikipedia.org/wiki/{wikipedia}' target='_blank' rel='noopener'><img src='./assets/svg/wikipedia.svg' textmode='📖' alt='Wikipedia'/></a>",
      "condition": {
        "or": [
          "wikipedia~*",
          "wikidata~*"
        ]
      },
      "mappings": [
        {
          "#": "ignore-image-in-then",
          "if": "wikipedia=",
          "then": "<a class='h-8' href='https://www.wikidata.org/wiki/{wikidata}' target='_blank' rel='noopener'><img src='./assets/svg/wikidata.svg' alt='Wikidata'/></a>"
        }
      ]
    },
    {
      "id": "open_until",
      "labels": [
        "defaults",
        "in_favourite"
      ],
      "#": "Titleicon showing e.g. 'open until 17:00'",
      "icon": {
        "class": "w-20 mx-1 flex items-center"
      },
      "render": "{opening_hours_state()}",
      "condition": {
        "or": [
          "opening_hours~*",
          {
            "or": [
              {
                "and": [
                  "seasonal~.*winter.*",
                  "_now:date~....-(12|01|02)-.."
                ]
              },
              {
                "and": [
                  "seasonal~.*spring.*",
                  "_now:date~....-(03|04|05)-.."
                ]
              },
              {
                "and": [
                  "seasonal~.*summer.*",
                  "_now:date~....-(06|07|08)-.."
                ]
              },
              {
                "and": [
                  "seasonal~.*autumn.*",
                  "_now:date~....-(09|10|11)-.."
                ]
              }
            ]
          }
        ]
      }
    },
    {
      "id": "phonelink",
      "labels": [
        "defaults",
        "in_favourite"
      ],
      "render": {
        "de": "{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEphone&RBRACE,,,Telefon)}",
        "en": "{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEphone&RBRACE,,,phone)}",
        "nl": "{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEphone&RBRACE,,,Telefoneer)}",
        "_context": "layers:icons.tagRenderings.phonelink.render"
      },
      "mappings": [
        {
          "#": "ignore-image-in-then",
          "if": "contact:phone~*",
          "then": {
            "de": "{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEcontact:phone&RBRACE,,,Telefon)}",
            "en": "{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEcontact:phone&RBRACE,,,phone)}",
            "nl": "{link(<img textmode='📞' alt='phone' src='./assets/layers/questions/phone.svg'/>,tel:&LBRACEcontact:phone&RBRACE,,,Telefoneer)}",
            "_context": "layers:icons.tagRenderings.phonelink.mappings.0.then"
          }
        }
      ],
      "condition": {
        "or": [
          "phone~*",
          "contact:phone~*"
        ]
      }
    },
    {
      "id": "emaillink",
      "labels": [
        "defaults",
        "in_favourite"
      ],
      "render": "<a href='mailto:{email}'><img textmode='✉️' alt='email' src='./assets/layers/questions/send_email.svg'/></a>",
      "mappings": [
        {
          "#": "ignore-image-in-then",
          "if": "contact:email~*",
          "then": "<a href='mailto:{contact:email}'><img textmode='✉️' alt='email' src='./assets/layers/questions/send_email.svg'/></a>"
        },
        {
          "#": "ignore-image-in-then",
          "if": "operator:email~*",
          "then": "<a href='mailto:{operator:email}'><img textmode='✉️' alt='email' src='./assets/layers/questions/send_email.svg'/></a>"
        }
      ],
      "condition": {
        "or": [
          "email~*",
          "contact:email~*",
          "operator:email~*"
        ]
      }
    },
    {
      "id": "websitelink",
      "labels": [
        "defaults",
        "in_favourite"
      ],
      "mappings": [
        {
          "#": "ignore-image-in-then",
          "if": "website~*",
          "then": "<a href='{website}' target='_blank' rel='noopener'><img textmode='🌐' alt='website' src='./assets/layers/icons/website.svg'/></a>"
        },
        {
          "#": "ignore-image-in-then",
          "if": "operator:website~*",
          "then": "<a href='{operator:website}' target='_blank' rel='noopener'><img textmode='🌐' alt='website' src='./assets/layers/icons/website.svg'/></a>"
        },
        {
          "#": "ignore-image-in-then",
          "if": "context:website~*",
          "then": "<a href='{contact:website}' target='_blank' rel='noopener'><img textmode='🌐' alt='website' src='./assets/layers/icons/website.svg'/></a>"
        }
      ]
    },
    {
      "id": "smokingicon",
      "labels": [
        "defaults",
        "in_favourite"
      ],
      "mappings": [
        {
          "#": "ignore-image-in-then",
          "if": "smoking=no",
          "then": "<img textmode='🚭️' alt='no smoking' src='./assets/layers/questions/no_smoking.svg'/>"
        },
        {
          "#": "ignore-image-in-then",
          "if": "smoking=yes",
          "then": "<img textmode='🚬️' alt='smoking allowed' src='./assets/layers/questions/smoking.svg'/>"
        }
      ]
    },
    {
      "id": "dogicon",
      "labels": [
        "defaults",
        "in_favourite"
      ],
      "mappings": [
        {
          "if": "dog=no",
          "#": "ignore-image-in-then",
          "then": "<img textmode='🐕 ⃠' alt='no_dogs' src='./assets/layers/questions/no_dogs.svg'>"
        },
        {
          "if": "dog=leashed",
          "#": "ignore-image-in-then",
          "then": "<img textmode='🐕' alt='dogs are allowed but leashed' src='./assets/layers/questions/dogs_leashed.svg'>"
        },
        {
          "if": {
            "or": [
              "dog=yes",
              "dog=unleashed"
            ]
          },
          "#": "ignore-image-in-then",
          "then": "<img textmode='🐕' alt='dogs are allowed' src='./assets/layers/questions/dogs_allowed.svg'>"
        }
      ]
    },
    {
      "id": "sharelink",
      "labels": [
        "defaults"
      ],
      "render": "{share_link()}",
      "metacondition": "_supports_sharing=yes"
    },
    {
      "id": "favourite_title_icon",
      "labels": [
        "defaults"
      ],
      "render": {
        "*": "{favourite_icon()}"
      },
      "metacondition": "_loggedIn=true"
    },
    {
      "id": "osmlink",
      "labels": [
        "defaults"
      ],
      "render": {
        "de": "{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,https://openstreetmap.org/&LBRACEid&RBRACE,,,Auf openstreetmap.org öffnen)}",
        "en": "{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,https://openstreetmap.org/&LBRACEid&RBRACE,,,Open on openstreetmap.org)}",
        "nl": "{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,https://openstreetmap.org/&LBRACEid&RBRACE,,,Bekijk op openstreetmap.org)}",
        "_context": "layers:icons.tagRenderings.osmlink.render"
      },
      "mappings": [
        {
          "if": "id~.*/-.*",
          "then": ""
        },
        {
          "#": "ignore-image-in-then",
          "if": "_backend~*",
          "then": {
            "de": "{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,&LBRACE_backend&RBRACE/&LBRACEid&RBRACE,,,Auf openstreetmap.org öffnen)}",
            "en": "{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,&LBRACE_backend&RBRACE/&LBRACEid&RBRACE,,,Open on openstreetmap.org)}",
            "nl": "{link(<img alt='on osm' textmode='🗺️' src='./assets/svg/osm-logo-us.svg'/>,&LBRACE_backend&RBRACE/&LBRACEid&RBRACE,,,Bekijk op openstreetmap.org)}",
            "_context": "layers:icons.tagRenderings.osmlink.mappings.1.then"
          }
        }
      ],
      "condition": "id~(node|way|relation)/[0-9]*"
    },
    {
      "id": "direction",
      "labels": [
        "defaults",
        "in_favourite"
      ],
      "render": "{direction_indicator()}"
    },
    {
      "id": "rating",
      "icon": {
        "class": "w-20 mx-1 flex items-center"
      },
      "render": "{rating()}"
    }
  ],
  "_layerIcon": []
}